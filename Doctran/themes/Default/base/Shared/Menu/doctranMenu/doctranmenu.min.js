(function(e){e.fn.extend({doctranMenu:function(m){var a=e.extend(!0,{toggleDuration:0,recursiveClose:!0,uniqueBranching:!0,expanderOpen:"\u25bc",expanderClosed:"\u25b6",openActive:!0,showHide:{toggleDuration:0,appendTo:null,onShow:null,onHide:null},search:{id:"search-input",name:"search-name",method:"GET",action:null,filter:function(a,d){var c=new RegExp(d.replace(/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"i");return a.text().match(c)},resultInfo:function(a){a=a.parent().parent().parent().children("a, .title");
    return a.length?" ("+a.text()+")":""}}},m),k=function(){return"Filter"+(null===a.search.action?"":" (Press ENTER to Search)...")},n=function(){return e("<span>",{"class":"expander"}).mousedown(function(a){a.preventDefault()}).hover(function(){e(this).parent().toggleClass("hover")}).append(e("<a>",{text:a.expanderClosed}))},p=function(f,d,c){return e("<input>",{id:a.search.id,name:a.search.name,value:k()}).focusin(function(){var b=e(this);b.toggleClass("active");b.prop("value")===k()&&b.prop("value",
    "")}).focusout(function(){var b=e(this);b.toggleClass("active");""===b.prop("value")&&b.prop("value",k);d.children(".focused").removeClass("focused")}).keydown(function(b){var a=b.keyCode||b.which,c;if(38===a||40===a)return c=d.children(".focused"),c.length?(a=38===a?c.prevAll("li:visible").first():c.nextAll("li:visible").first(),c.removeClass("focused")):a=38===a?d.children("li:visible:last"):d.children("li:visible:first"),a.addClass("focused"),this.scrollTo(f,a),b.preventDefault(),!1}).keyup(function(b){var g=
    e(this);b=b.keyCode||b.which;var h=27===b?"":g.prop("value"),f;13===b&&(f=d.children(".focused")).length?window.location.replace(f.children("a").prop("href")):(g.prop("value",h),""===h?(c.show(),d.hide()):(d.children("li").hide().filter(function(){return a.search.filter(e(this).children("a"),h)}).show(),c.hide(),d.show()))})},q=function(f,d){var c=e("<ul>",{"class":"searchResults"}),b={};d.find("li>a").each(function(){var d=e(this),f=a.search.resultInfo(d),f=d.clone().append(e("<span>",{"class":"resultInfo"}).append(f));
    b[d.prop("href")]=e("<li>").hover(function(){c.children(".focused").removeClass("focused")}).append(f)});c.append(e.map(b,function(a){return a}));return c.hide()},r=function(f,d,c){return e(f).addClass("doctran-menu-show-hide-img").addClass("hide").click(function(){var b=e(this);if(d.is(":hidden")){if(null!=a.showHide.onHide)a.showHide.onHide();b.attr("src","img/hide.png");c.css({width:"auto"})}else{if(null!=a.showHide.onShow)a.showHide.onShow();c.css({width:d.width()});b.attr("src","img/show.png")}b.toggleClass("show");
    b.toggleClass("hide");d.animate({width:"toggle"},a.showHide.toggleDuration)})},l=function(f){f.children("li.sublist").each(function(){l(e(this).children("ul"))});f.children("li:not(.sublist):has(ul)").each(function(){var d=e(this),c,b;d.mousedown(function(a){a.preventDefault()});0===d.has(".expander").length&&(b=d.children("ul"),l(b),c=n().click(function(){var c=e(this),d=c.parent();a.uniqueBranching&&d.siblings().children(".open.expander").click();a.recursiveClose&&c.is(".open")&&d.find("ul").find(".open.expander").click();
    c.toggleClass("open");d.toggleClass("targeted");d.parent().closest("li:not(.sublist)").toggleClass("targeted");c.children("a").text(b.is(":visible")?a.expanderClosed:a.expanderOpen);b.slideToggle(a.toggleDuration)}),d.prepend(c));d.children("ul").toggle()})},t=function(f,d){var c=q(f,d),b=p(f,c,d),b=e("<form>",{action:a.search.action,type:"text",method:a.search.method,autocomplete:"off",value:k}).submit(function(b){if(c.children(".focused").length||null===a.search.action)return b.preventDefault(),
    !1}).append(b);f.prepend(b);f.append(c)};return this.each(function(f,d){var c=e(d),b=c.children("ul"),g=c.find(".active").first();c.addClass("jsEnabled");b.addClass("menu");l(b);null!=a.showHide.appendTo&&r(a.showHide.appendTo,c,b);if(a.openActive){var h=a.toggleDuration;g.length&&(a.toggleDuration=0,g.parents("li").andSelf().children(".expander").click(),a.toggleDuration=h,c.scrollTop(g.offset().top-c.offset().top+c.scrollTop()-c.height()/2))}a.search&&t(c,b)})}})})(jQuery);
